schema: '2.0'
stages:
  AddData:
    cmd: zntrack run ipsuite.data_loading.add_data_ase.AddData --name AddData
    deps:
    - path: KCl1650K.extxyz
      md5: 2b9727d4c2a7f1eacab8d6a66b47118b
      size: 219416447
    params:
      params.yaml:
        AddData:
          lines_to_read:
    outs:
    - path: nodes/AddData/atoms.h5
      md5: 8f071b60494c1d6514aa4aa196ca8a2c
      size: 112166856
  train_data:
    cmd: zntrack run ipsuite.configuration_selection.random.RandomSelection --name
      train_data
    deps:
    - path: nodes/AddData/atoms.h5
      md5: 8f071b60494c1d6514aa4aa196ca8a2c
      size: 112166856
    - path: nodes/test_data/selected_configurations.json
      md5: 62dfee949754d97ba0947a86b8ec62a8
      size: 6855
    params:
      params.yaml:
        train_data:
          n_configurations: 100
          seed: 1234
    outs:
    - path: nodes/train_data/selected_configurations.json
      md5: cf304e91254cbe34a1fb4f17c108b71c
      size: 1465
  MLModel:
    cmd: zntrack run ipsuite.models.gap.GAP --name MLModel
    deps:
    - path: nodes/train_data/selected_configurations.json
      md5: adee5a519f08077f4cbf7ed81a586aa3
      size: 79
    params:
      params.yaml:
        MLModel:
          distance_nb:
            _type: distanceNb_dataclass
            value:
              add_species: true
              covariance_type: ard_se
              cutoff: 6.0
              delta: 0.1
              n_sparse: 50
              order: 2
              sparse_method: CUR_POINTS
              theta_uniform: 1.0
          gap:
            _type: GapParameter_dataclass
            value:
              default_sigma: '{0.0001 0.01 0.01 0.01}'
              e0_method: average
              sparse_jitter: 1e-10
          soap:
            _type: soap_dataclass
            value:
              add_species: true
              covariance_type: dot_product
              cutoff: 6.0
              cutoff_transition_width: 0.5
              delta: 1.0
              l_max: 7
              n_max: 7
              n_sparse: 50
              sigma: 0.5
              sparse_method: CUR_POINTS
              zeta: 4.0
          use_energy: true
          use_forces: true
          use_stresses: false
    outs:
    - path: nodes/MLModel/gap.input
      md5: cdc62c6d1613309a707cf62754e3d3f7
      size: 728
    - path: nodes/MLModel/model
      md5: 07d4fe92a43c9439380ef27a1eafdb26.dir
      size: 2417906
      nfiles: 7
    - path: nodes/MLModel/train_atoms.extxyz
      md5: 98438e6a2da7ea959017813856266d18
      size: 53180
  test_data:
    cmd: zntrack run ipsuite.configuration_selection.uniform_energetic.UniformEnergeticSelection
      --name test_data
    deps:
    - path: nodes/AddData/atoms.h5
      md5: 8f071b60494c1d6514aa4aa196ca8a2c
      size: 112166856
    params:
      params.yaml:
        test_data:
          n_configurations: 500
    outs:
    - path: nodes/test_data/selected_configurations.json
      md5: 62dfee949754d97ba0947a86b8ec62a8
      size: 6855
  PredictWithModel:
    cmd: zntrack run ipsuite.analysis.model.PredictWithModel --name PredictWithModel
    deps:
    - path: nodes/model_1/model
      md5: baaa3ad58b646f9a175a8b97350f1911.dir
      size: 22456080
      nfiles: 5
    - path: nodes/model_1/test-data.extxyz
      md5: 85207744be35b64d4de894f4afc41873
      size: 106363
    - path: nodes/model_1/train-data.extxyz
      md5: bc88bd18fdb9f221b85326972580993b
      size: 1063613
    - path: nodes/test_data/selected_configurations.json
      md5: 62dfee949754d97ba0947a86b8ec62a8
      size: 6855
    outs:
    - path: nodes/PredictWithModel/atoms.h5
      md5: 2d5492d21e14abd0be368dc91f780c24
      size: 2920888
  AnalysePrediction:
    cmd: zntrack run ipsuite.analysis.model.AnalysePrediction --name AnalysePrediction
    deps:
    - path: nodes/PredictWithModel/atoms.h5
      md5: 2d5492d21e14abd0be368dc91f780c24
      size: 2920888
    outs:
    - path: nodes/AnalysePrediction/energy.json
      md5: 60ec8af28ca28a80da724ca110904675
      size: 164
    - path: nodes/AnalysePrediction/energy_df.csv
      md5: 2c7393e2740edb10123463882e145fa7
      size: 21094
    - path: nodes/AnalysePrediction/forces.json
      md5: 524ff3d60f7387f20de6a4d98ff74be0
      size: 168
    - path: nodes/AnalysePrediction/forces_df.csv
      md5: 0b06d43450a435760c08d7a7356d690b
      size: 7213496
    - path: nodes/AnalysePrediction/plots
      md5: 7656089ff91851d840d513efbfb0c429.dir
      size: 179807
      nfiles: 2
    - path: nodes/AnalysePrediction/stress.json
      md5: 99914b932bd37a50b983c5e7c90ae93b
      size: 2
    - path: nodes/AnalysePrediction/stress_df.csv
      md5: a227d42afbcc590b4e949075cde4a5b6
      size: 3
  validate_data:
    cmd: zntrack run ipsuite.configuration_selection.random.RandomSelection --name
      validate_data
    deps:
    - path: nodes/train_data/selected_configurations.json
      md5: cf304e91254cbe34a1fb4f17c108b71c
      size: 1465
    params:
      params.yaml:
        validate_data:
          n_configurations: 10
          seed: 1234
    outs:
    - path: nodes/validate_data/selected_configurations.json
      md5: cef502c25a50d67ad8ac679a907c7166
      size: 168
  model_1:
    cmd: zntrack run ipsuite.models.mace_model.MACE --name model_1
    deps:
    - path: nodes/train_data/selected_configurations.json
      md5: cf304e91254cbe34a1fb4f17c108b71c
      size: 1465
    - path: nodes/validate_data/selected_configurations.json
      md5: cef502c25a50d67ad8ac679a907c7166
      size: 168
    params:
      params.yaml:
        model_1:
          amsgrad: true
          batch_size: 10
          ema: true
          ema_decay: 0.99
          hidden_irreps: 16x0e + 16x1o
          max_num_epochs: 50
          num_cutoff_basis: 5
          num_interactions: 2
          num_radial_basis: 8
          r_max: 5.0
          seed: 1
          start_swa: 1200
          swa: true
          use_energy: true
          use_forces: true
          use_stresses: false
    outs:
    - path: nodes/model_1/model
      md5: baaa3ad58b646f9a175a8b97350f1911.dir
      size: 22456080
      nfiles: 5
    - path: nodes/model_1/test-data.extxyz
      md5: 85207744be35b64d4de894f4afc41873
      size: 106363
    - path: nodes/model_1/train-data.extxyz
      md5: bc88bd18fdb9f221b85326972580993b
      size: 1063613
  model_3:
    cmd: zntrack run ipsuite.models.mace_model.MACE --name model_3
    deps:
    - path: nodes/train_data/selected_configurations.json
      md5: cf304e91254cbe34a1fb4f17c108b71c
      size: 1465
    - path: nodes/validate_data/selected_configurations.json
      md5: cef502c25a50d67ad8ac679a907c7166
      size: 168
    params:
      params.yaml:
        model_3:
          amsgrad: true
          batch_size: 10
          ema: true
          ema_decay: 0.99
          hidden_irreps: 16x0e + 16x1o
          max_num_epochs: 50
          num_cutoff_basis: 5
          num_interactions: 2
          num_radial_basis: 8
          r_max: 5.0
          seed: 3
          start_swa: 1200
          swa: true
          use_energy: true
          use_forces: true
          use_stresses: false
    outs:
    - path: nodes/model_3/model
      md5: d8ff4bc4849727629fb05debd1b35377.dir
      size: 22456119
      nfiles: 5
    - path: nodes/model_3/test-data.extxyz
      md5: 85207744be35b64d4de894f4afc41873
      size: 106363
    - path: nodes/model_3/train-data.extxyz
      md5: bc88bd18fdb9f221b85326972580993b
      size: 1063613
  model_2:
    cmd: zntrack run ipsuite.models.mace_model.MACE --name model_2
    deps:
    - path: nodes/train_data/selected_configurations.json
      md5: cf304e91254cbe34a1fb4f17c108b71c
      size: 1465
    - path: nodes/validate_data/selected_configurations.json
      md5: cef502c25a50d67ad8ac679a907c7166
      size: 168
    params:
      params.yaml:
        model_2:
          amsgrad: true
          batch_size: 10
          ema: true
          ema_decay: 0.99
          hidden_irreps: 16x0e + 16x1o
          max_num_epochs: 50
          num_cutoff_basis: 5
          num_interactions: 2
          num_radial_basis: 8
          r_max: 5.0
          seed: 2
          start_swa: 1200
          swa: true
          use_energy: true
          use_forces: true
          use_stresses: false
    outs:
    - path: nodes/model_2/model
      md5: 7c189c502777386a25cc58d2ca20a87a.dir
      size: 22456090
      nfiles: 5
    - path: nodes/model_2/test-data.extxyz
      md5: 85207744be35b64d4de894f4afc41873
      size: 106363
    - path: nodes/model_2/train-data.extxyz
      md5: bc88bd18fdb9f221b85326972580993b
      size: 1063613
  model_4:
    cmd: zntrack run ipsuite.models.mace_model.MACE --name model_4
    deps:
    - path: nodes/train_data/selected_configurations.json
      md5: cf304e91254cbe34a1fb4f17c108b71c
      size: 1465
    - path: nodes/validate_data/selected_configurations.json
      md5: cef502c25a50d67ad8ac679a907c7166
      size: 168
    params:
      params.yaml:
        model_4:
          amsgrad: true
          batch_size: 10
          ema: true
          ema_decay: 0.99
          hidden_irreps: 16x0e + 16x1o
          max_num_epochs: 50
          num_cutoff_basis: 5
          num_interactions: 2
          num_radial_basis: 8
          r_max: 5.0
          seed: 4
          start_swa: 1200
          swa: true
          use_energy: true
          use_forces: true
          use_stresses: false
    outs:
    - path: nodes/model_4/model
      md5: aa3033f027eeafaf0ea2a34abde24911.dir
      size: 22456069
      nfiles: 5
    - path: nodes/model_4/test-data.extxyz
      md5: 85207744be35b64d4de894f4afc41873
      size: 106363
    - path: nodes/model_4/train-data.extxyz
      md5: bc88bd18fdb9f221b85326972580993b
      size: 1063613
  model_5:
    cmd: zntrack run ipsuite.models.mace_model.MACE --name model_5
    deps:
    - path: nodes/train_data/selected_configurations.json
      md5: cf304e91254cbe34a1fb4f17c108b71c
      size: 1465
    - path: nodes/validate_data/selected_configurations.json
      md5: cef502c25a50d67ad8ac679a907c7166
      size: 168
    params:
      params.yaml:
        model_5:
          amsgrad: true
          batch_size: 10
          ema: true
          ema_decay: 0.99
          hidden_irreps: 16x0e + 16x1o
          max_num_epochs: 50
          num_cutoff_basis: 5
          num_interactions: 2
          num_radial_basis: 8
          r_max: 5.0
          seed: 5
          start_swa: 1200
          swa: true
          use_energy: true
          use_forces: true
          use_stresses: false
    outs:
    - path: nodes/model_5/model
      md5: 0cd8a1a3c1bfa2cef120b2814cc14e8d.dir
      size: 22456067
      nfiles: 5
    - path: nodes/model_5/test-data.extxyz
      md5: 85207744be35b64d4de894f4afc41873
      size: 106363
    - path: nodes/model_5/train-data.extxyz
      md5: bc88bd18fdb9f221b85326972580993b
      size: 1063613
  ModelEnsembleAnalysis:
    cmd: zntrack run ipsuite.analysis.ensemble.ModelEnsembleAnalysis --name ModelEnsembleAnalysis
    deps:
    - path: nodes/model_1/model
      md5: 28833bad6cc2aaf95f4112b460c2b24e.dir
      size: 22448645
      nfiles: 5
    - path: nodes/model_1/test-data.extxyz
      md5: 85207744be35b64d4de894f4afc41873
      size: 106363
    - path: nodes/model_1/train-data.extxyz
      md5: bc88bd18fdb9f221b85326972580993b
      size: 1063613
    - path: nodes/model_2/model
      md5: bc8479e4963b12b6d3ff8e9bc2b4e5e4.dir
      size: 22448684
      nfiles: 5
    - path: nodes/model_2/test-data.extxyz
      md5: 85207744be35b64d4de894f4afc41873
      size: 106363
    - path: nodes/model_2/train-data.extxyz
      md5: bc88bd18fdb9f221b85326972580993b
      size: 1063613
    - path: nodes/model_3/model
      md5: f6bc2880966dca2c3306747fef876131.dir
      size: 22448731
      nfiles: 5
    - path: nodes/model_3/test-data.extxyz
      md5: 85207744be35b64d4de894f4afc41873
      size: 106363
    - path: nodes/model_3/train-data.extxyz
      md5: bc88bd18fdb9f221b85326972580993b
      size: 1063613
    - path: nodes/model_4/model
      md5: 1fbc76194957705b040f5d3cb0e182ee.dir
      size: 22448723
      nfiles: 5
    - path: nodes/model_4/test-data.extxyz
      md5: 85207744be35b64d4de894f4afc41873
      size: 106363
    - path: nodes/model_4/train-data.extxyz
      md5: bc88bd18fdb9f221b85326972580993b
      size: 1063613
    - path: nodes/model_5/model
      md5: 55c74546c566f9b9ff6bdcb56204f693.dir
      size: 22448722
      nfiles: 5
    - path: nodes/model_5/test-data.extxyz
      md5: 85207744be35b64d4de894f4afc41873
      size: 106363
    - path: nodes/model_5/train-data.extxyz
      md5: bc88bd18fdb9f221b85326972580993b
      size: 1063613
    - path: nodes/test_data/selected_configurations.json
      md5: 3a7126b406f4f8b7355bc7caa60da5f9
      size: 6849
    params:
      params.yaml:
        ModelEnsembleAnalysis:
          bins: 100
    outs:
    - path: nodes/ModelEnsembleAnalysis/histogram.png
      md5: 2f7e1969262b08d8d74c72eeef41fd57
      size: 12154
    - path: nodes/ModelEnsembleAnalysis/normal_plot.png
      md5: 26f42aaf8bdbbb9cbf0d8016bfa70c5e
      size: 63843
    - path: nodes/ModelEnsembleAnalysis/prediction_list.json
      md5: ef89b88cbbf6deea31c0404367333216
      size: 8030627
    - path: nodes/ModelEnsembleAnalysis/predictions.json
      md5: 6d8003c47ace7a4386c0f1188a292582
      size: 6737502
    - path: nodes/ModelEnsembleAnalysis/sorted_plot.png
      md5: 1184e60c06c6113b893dfd498c1a0ef5
      size: 112044
  combined_analyse:
    cmd: zntrack run ipsuite.analysis.model.AnalysePrediction --name combined_analyse
    deps:
    - path: nodes/ModelEnsembleAnalysis/histogram.png
      md5: 2f7e1969262b08d8d74c72eeef41fd57
      size: 12154
    - path: nodes/ModelEnsembleAnalysis/normal_plot.png
      md5: 26f42aaf8bdbbb9cbf0d8016bfa70c5e
      size: 63843
    - path: nodes/ModelEnsembleAnalysis/prediction_list.json
      md5: ef89b88cbbf6deea31c0404367333216
      size: 8030627
    - path: nodes/ModelEnsembleAnalysis/predictions.json
      md5: 6d8003c47ace7a4386c0f1188a292582
      size: 6737502
    - path: nodes/ModelEnsembleAnalysis/sorted_plot.png
      md5: 1184e60c06c6113b893dfd498c1a0ef5
      size: 112044
    outs:
    - path: nodes/combined_analyse/energy.json
      md5: 232a4c5f075711dde24dc064c958b396
      size: 165
    - path: nodes/combined_analyse/energy_df.csv
      md5: f5e267f2ca10a16252dd5dbb06f92524
      size: 21108
    - path: nodes/combined_analyse/forces.json
      md5: e58eecf3544e1e156ebc59abdad18b25
      size: 168
    - path: nodes/combined_analyse/forces_df.csv
      md5: a225b5a66345c927365435a1898a23cb
      size: 7213580
    - path: nodes/combined_analyse/plots
      md5: cd99a501177613c56ce0b2786c193614.dir
      size: 168762
      nfiles: 2
    - path: nodes/combined_analyse/stress.json
      md5: 99914b932bd37a50b983c5e7c90ae93b
      size: 2
    - path: nodes/combined_analyse/stress_df.csv
      md5: a227d42afbcc590b4e949075cde4a5b6
      size: 3
  ensemble_model:
    cmd: zntrack run ipsuite.models.ensemble.EnsembleModel --name ensemble_model
    deps:
    - path: nodes/model_1/model
      md5: baaa3ad58b646f9a175a8b97350f1911.dir
      size: 22456080
      nfiles: 5
    - path: nodes/model_1/test-data.extxyz
      md5: 85207744be35b64d4de894f4afc41873
      size: 106363
    - path: nodes/model_1/train-data.extxyz
      md5: bc88bd18fdb9f221b85326972580993b
      size: 1063613
    - path: nodes/model_2/model
      md5: 7c189c502777386a25cc58d2ca20a87a.dir
      size: 22456090
      nfiles: 5
    - path: nodes/model_2/test-data.extxyz
      md5: 85207744be35b64d4de894f4afc41873
      size: 106363
    - path: nodes/model_2/train-data.extxyz
      md5: bc88bd18fdb9f221b85326972580993b
      size: 1063613
    - path: nodes/model_3/model
      md5: d8ff4bc4849727629fb05debd1b35377.dir
      size: 22456119
      nfiles: 5
    - path: nodes/model_3/test-data.extxyz
      md5: 85207744be35b64d4de894f4afc41873
      size: 106363
    - path: nodes/model_3/train-data.extxyz
      md5: bc88bd18fdb9f221b85326972580993b
      size: 1063613
    - path: nodes/model_4/model
      md5: aa3033f027eeafaf0ea2a34abde24911.dir
      size: 22456069
      nfiles: 5
    - path: nodes/model_4/test-data.extxyz
      md5: 85207744be35b64d4de894f4afc41873
      size: 106363
    - path: nodes/model_4/train-data.extxyz
      md5: bc88bd18fdb9f221b85326972580993b
      size: 1063613
    - path: nodes/model_5/model
      md5: 0cd8a1a3c1bfa2cef120b2814cc14e8d.dir
      size: 22456067
      nfiles: 5
    - path: nodes/model_5/test-data.extxyz
      md5: 85207744be35b64d4de894f4afc41873
      size: 106363
    - path: nodes/model_5/train-data.extxyz
      md5: bc88bd18fdb9f221b85326972580993b
      size: 1063613
    outs:
    - path: nodes/ensemble_model/uuid.json
      md5: 9ec4d591a789e0587704dca64b5d9097
      size: 38
  esnemble_prediction:
    cmd: zntrack run ipsuite.analysis.model.PredictWithModel --name esnemble_prediction
    deps:
    - path: nodes/test_data/selected_configurations.json
      md5: 3a7126b406f4f8b7355bc7caa60da5f9
      size: 6849
    outs:
    - path: nodes/esnemble_prediction/atoms.db
      md5: b53f746259e0fd90ff08bb1377773e44
      size: 3289088
  ensemble_analyse:
    cmd: zntrack run ipsuite.analysis.model.AnalysePrediction --name ensemble_analyse
    deps:
    - path: nodes/esnemble_prediction/atoms.db
      md5: b53f746259e0fd90ff08bb1377773e44
      size: 3289088
    outs:
    - path: nodes/ensemble_analyse/energy.json
      md5: ae1d75288c48666afe0b6dc3f1e56092
      size: 164
    - path: nodes/ensemble_analyse/energy_df.csv
      md5: 3222bb794ae70e018c8eba12c90a1372
      size: 21105
    - path: nodes/ensemble_analyse/forces.json
      md5: e58eecf3544e1e156ebc59abdad18b25
      size: 168
    - path: nodes/ensemble_analyse/forces_df.csv
      md5: 019b65f8af025b5df26d4896dce888f7
      size: 7213116
    - path: nodes/ensemble_analyse/plots
      md5: cd99a501177613c56ce0b2786c193614.dir
      size: 168762
      nfiles: 2
    - path: nodes/ensemble_analyse/stress.json
      md5: 99914b932bd37a50b983c5e7c90ae93b
      size: 2
    - path: nodes/ensemble_analyse/stress_df.csv
      md5: a227d42afbcc590b4e949075cde4a5b6
      size: 3
  ensemble_prediction:
    cmd: zntrack run ipsuite.analysis.model.PredictWithModel --name ensemble_prediction
    deps:
    - path: nodes/ensemble_model/uuid.json
      md5: 9ec4d591a789e0587704dca64b5d9097
      size: 38
    - path: nodes/test_data/selected_configurations.json
      md5: 62dfee949754d97ba0947a86b8ec62a8
      size: 6855
    outs:
    - path: nodes/ensemble_prediction/atoms.h5
      md5: dbbb02d83c9bdeee0c92b6fe8c201d18
      size: 2892424
  ensemble_analysis:
    cmd: zntrack run ipsuite.analysis.model.AnalysePrediction --name ensemble_analysis
    deps:
    - path: nodes/ensemble_prediction/atoms.h5
      md5: dbbb02d83c9bdeee0c92b6fe8c201d18
      size: 2892424
    outs:
    - path: nodes/ensemble_analysis/energy.json
      md5: 744b86daccb9ec771bca51116114a234
      size: 165
    - path: nodes/ensemble_analysis/energy_df.csv
      md5: 67dcd628ad2c0d39324d58f688e50f50
      size: 21093
    - path: nodes/ensemble_analysis/forces.json
      md5: 7221f81b19b5711f488f01320905f0f9
      size: 167
    - path: nodes/ensemble_analysis/forces_df.csv
      md5: 669634b08114a3f4736788e10492d8ce
      size: 7213488
    - path: nodes/ensemble_analysis/plots
      md5: cd99a501177613c56ce0b2786c193614.dir
      size: 168762
      nfiles: 2
    - path: nodes/ensemble_analysis/stress.json
      md5: 99914b932bd37a50b983c5e7c90ae93b
      size: 2
    - path: nodes/ensemble_analysis/stress_df.csv
      md5: a227d42afbcc590b4e949075cde4a5b6
      size: 3

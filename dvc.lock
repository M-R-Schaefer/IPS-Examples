schema: '2.0'
stages:
  AddData:
    cmd: zntrack run ipsuite.nodes.AddData --name AddData
    deps:
    - path: KCl1650K.extxyz
      md5: 2b9727d4c2a7f1eacab8d6a66b47118b
      size: 219416447
    params:
      params.yaml:
        AddData:
          lines_to_read: 100
    outs:
    - path: nodes/AddData/atoms.h5
      md5: 186cf041c66bfa95a24f83826fb6b8ea
      size: 764424
    - path: nodes/AddData/node-meta.json
      hash: md5
      md5: c76fef3c0adb46047a6d49ac5943a484
      size: 48
  train_data:
    cmd: zntrack run ipsuite.nodes.RandomSelection --name train_data
    deps:
    - path: nodes/AddData/atoms.h5
      md5: 186cf041c66bfa95a24f83826fb6b8ea
      size: 764424
    - path: nodes/AddData/node-meta.json
      hash: md5
      md5: c76fef3c0adb46047a6d49ac5943a484
      size: 48
    - path: nodes/test_data/node-meta.json
      hash: md5
      md5: 1c54ba0e4b6069d963c48c11b5af1752
      size: 48
    - path: nodes/test_data/selected_configurations.json
      md5: eab7f3a8ecd310dc9e8d61bc356ae639
      size: 144
    - path: nodes/test_data/selection.png
      hash: md5
      md5: 983d275c3cd55a1b16c4c1df6c090d99
      size: 26347
    params:
      params.yaml:
        train_data:
          n_configurations: 5
          seed: 1234
    outs:
    - path: nodes/train_data/node-meta.json
      hash: md5
      md5: 1f93c6593247e9a3805520d88ae5d2e8
      size: 48
    - path: nodes/train_data/selected_configurations.json
      md5: 4268ead45d4075511769bc5813c86746
      size: 85
    - path: nodes/train_data/selection.png
      hash: md5
      md5: 6a1c47236ccaa5832f570ca98bf8fafb
      size: 25613
  MLModel:
    cmd: zntrack run ipsuite.nodes.GAP --name MLModel
    deps:
    - path: nodes/train_data/node-meta.json
      hash: md5
      md5: 1f93c6593247e9a3805520d88ae5d2e8
      size: 48
    - path: nodes/train_data/selected_configurations.json
      md5: 4268ead45d4075511769bc5813c86746
      size: 85
    - path: nodes/train_data/selection.png
      hash: md5
      md5: 6a1c47236ccaa5832f570ca98bf8fafb
      size: 25613
    params:
      params.yaml:
        MLModel:
          distance_nb:
            _type: distanceNb_dataclass
            value:
              add_species: true
              covariance_type: ard_se
              cutoff: 6.0
              delta: 0.1
              n_sparse: 50
              order: 2
              sparse_method: CUR_POINTS
              theta_uniform: 1.0
          gap:
            _type: GapParameter_dataclass
            value:
              default_sigma: '{0.0001 0.01 0.01 0.01}'
              e0_method: average
              sparse_jitter: 1e-10
          soap:
            _type: soap_dataclass
            value:
              add_species: true
              covariance_type: dot_product
              cutoff: 6.0
              cutoff_transition_width: 0.5
              delta: 1.0
              l_max: 7
              n_max: 7
              n_sparse: 50
              sigma: 0.5
              sparse_method: CUR_POINTS
              zeta: 4.0
          use_energy: true
          use_forces: true
          use_stresses: false
    outs:
    - path: nodes/MLModel/gap.input
      md5: cdc62c6d1613309a707cf62754e3d3f7
      size: 728
    - path: nodes/MLModel/model
      hash: md5
      md5: 317ec31700d19e10670dc22ec2db2d17.dir
      size: 2418046
      nfiles: 7
    - path: nodes/MLModel/node-meta.json
      hash: md5
      md5: 31b6cb7eee1c39453164ac1aa4d87e5c
      size: 48
    - path: nodes/MLModel/train_atoms.extxyz
      md5: 98438e6a2da7ea959017813856266d18
      size: 53180
    - path: nodes/MLModel/train_atoms.extxyz.idx
      hash: md5
      md5: 9e6816148701c531693922fae07852db
      size: 58
  test_data:
    cmd: zntrack run ipsuite.nodes.UniformEnergeticSelection --name test_data
    deps:
    - path: nodes/AddData/atoms.h5
      md5: 186cf041c66bfa95a24f83826fb6b8ea
      size: 764424
    - path: nodes/AddData/node-meta.json
      hash: md5
      md5: c76fef3c0adb46047a6d49ac5943a484
      size: 48
    params:
      params.yaml:
        test_data:
          n_configurations: 10
    outs:
    - path: nodes/test_data/node-meta.json
      hash: md5
      md5: 1c54ba0e4b6069d963c48c11b5af1752
      size: 48
    - path: nodes/test_data/selected_configurations.json
      md5: eab7f3a8ecd310dc9e8d61bc356ae639
      size: 144
    - path: nodes/test_data/selection.png
      hash: md5
      md5: 983d275c3cd55a1b16c4c1df6c090d99
      size: 26347
  PredictWithModel:
    cmd: zntrack run ipsuite.analysis.model.PredictWithModel --name PredictWithModel
    deps:
    - path: nodes/MLModel/gap.input
      md5: cdc62c6d1613309a707cf62754e3d3f7
      size: 728
    - path: nodes/MLModel/model
      md5: bcd52fb64e7f5b09df8dc0bed81a4655.dir
      size: 2393396
      nfiles: 7
    - path: nodes/MLModel/train_atoms.extxyz
      md5: 14c1247cc5d77d880f9f868a7e71a1df
      size: 31908
    - path: nodes/test_data/selected_configurations.json
      md5: eab7f3a8ecd310dc9e8d61bc356ae639
      size: 144
    outs:
    - path: nodes/PredictWithModel/atoms.h5
      md5: 4614b0d7d00b34fae2732d4404a8263c
      size: 97688
  AnalysePrediction:
    cmd: zntrack run ipsuite.analysis.model.AnalysePrediction --name AnalysePrediction
    deps:
    - path: nodes/PredictWithModel/atoms.h5
      md5: 4614b0d7d00b34fae2732d4404a8263c
      size: 97688
    outs:
    - path: nodes/AnalysePrediction/energy.json
      md5: 93521c6eacc6356b8e6ab94e23193a7a
      size: 168
    - path: nodes/AnalysePrediction/energy_df.csv
      md5: 8a5799f2feb1ec86dd0cb8fc58a9e3c9
      size: 417
    - path: nodes/AnalysePrediction/forces.json
      md5: acb78f3e1d0ffd78d240b083ec606cdb
      size: 167
    - path: nodes/AnalysePrediction/forces_df.csv
      md5: d891046cff3c402d0197e7f69f11640a
      size: 143476
    - path: nodes/AnalysePrediction/plots
      md5: 0e835962efecb778895191d4e6e12bd2.dir
      size: 163146
      nfiles: 2
    - path: nodes/AnalysePrediction/stress.json
      md5: 99914b932bd37a50b983c5e7c90ae93b
      size: 2
    - path: nodes/AnalysePrediction/stress_df.csv
      md5: a227d42afbcc590b4e949075cde4a5b6
      size: 3
  Prediction:
    cmd: zntrack run ipsuite.nodes.Prediction --name Prediction
    deps:
    - path: nodes/MLModel/gap.input
      md5: cdc62c6d1613309a707cf62754e3d3f7
      size: 728
    - path: nodes/MLModel/model
      hash: md5
      md5: 317ec31700d19e10670dc22ec2db2d17.dir
      size: 2418046
      nfiles: 7
    - path: nodes/MLModel/node-meta.json
      hash: md5
      md5: 31b6cb7eee1c39453164ac1aa4d87e5c
      size: 48
    - path: nodes/MLModel/train_atoms.extxyz
      md5: 98438e6a2da7ea959017813856266d18
      size: 53180
    - path: nodes/MLModel/train_atoms.extxyz.idx
      hash: md5
      md5: 9e6816148701c531693922fae07852db
      size: 58
    - path: nodes/test_data/node-meta.json
      hash: md5
      md5: 1c54ba0e4b6069d963c48c11b5af1752
      size: 48
    - path: nodes/test_data/selected_configurations.json
      md5: eab7f3a8ecd310dc9e8d61bc356ae639
      size: 144
    - path: nodes/test_data/selection.png
      hash: md5
      md5: 983d275c3cd55a1b16c4c1df6c090d99
      size: 26347
    outs:
    - path: nodes/Prediction/atoms.h5
      hash: md5
      md5: 188c75045c2aaa829529371521ce075a
      size: 101632
    - path: nodes/Prediction/node-meta.json
      hash: md5
      md5: b1145690a2279a063e965880b1589edd
      size: 48
  PredictionMetrics:
    cmd: zntrack run ipsuite.nodes.PredictionMetrics --name PredictionMetrics
    deps:
    - path: nodes/Prediction/atoms.h5
      hash: md5
      md5: 188c75045c2aaa829529371521ce075a
      size: 101632
    - path: nodes/Prediction/node-meta.json
      hash: md5
      md5: b1145690a2279a063e965880b1589edd
      size: 48
    outs:
    - path: nodes/PredictionMetrics/deviat_stress.json
      hash: md5
      md5: 99914b932bd37a50b983c5e7c90ae93b
      size: 2
    - path: nodes/PredictionMetrics/energy.json
      hash: md5
      md5: d5b2bb7cdc7440e2d31182e7f48eec55
      size: 190
    - path: nodes/PredictionMetrics/energy_df.csv
      hash: md5
      md5: 9cd3e887a78ea74278100da37f50a4b3
      size: 413
    - path: nodes/PredictionMetrics/forces.json
      hash: md5
      md5: 180dc897423660924035648f82bbbef5
      size: 188
    - path: nodes/PredictionMetrics/forces_df.csv
      hash: md5
      md5: e0beab34dffadb192f5ba89296af36c7
      size: 138577
    - path: nodes/PredictionMetrics/hydro_stress.json
      hash: md5
      md5: 99914b932bd37a50b983c5e7c90ae93b
      size: 2
    - path: nodes/PredictionMetrics/node-meta.json
      hash: md5
      md5: 14abf04e27dc91ad731a8d4fc11eb253
      size: 48
    - path: nodes/PredictionMetrics/plots
      hash: md5
      md5: d6ebc73db26abe0abc5ff1fe64d1f64e.dir
      size: 151328
      nfiles: 2
    - path: nodes/PredictionMetrics/stress.json
      md5: 99914b932bd37a50b983c5e7c90ae93b
      size: 2
    - path: nodes/PredictionMetrics/stress_deviatoric_df.csv
      hash: md5
      md5: a227d42afbcc590b4e949075cde4a5b6
      size: 3
    - path: nodes/PredictionMetrics/stress_df.csv
      md5: a227d42afbcc590b4e949075cde4a5b6
      size: 3
    - path: nodes/PredictionMetrics/stress_hydrostatic_df.csv
      hash: md5
      md5: a227d42afbcc590b4e949075cde4a5b6
      size: 3
